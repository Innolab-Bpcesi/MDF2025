<!DOCTYPE html>
<html>
<head>
<title>Pong Game</title>
<style>
body {
  background-color: #333;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
  font-family: sans-serif;
  color: white;
}

#gameCanvas {
  background-color: #000;
  border: 2px solid #fff;
}
</style>
</head>
<body>
  <canvas id="gameCanvas" width="800" height="600"></canvas>
  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // Paddle properties
    const paddleWidth = 10;
    const paddleHeight = 100;
    const paddleSpeed = 8;

    // Ball properties
    const ballSize = 10;
    let ballX = canvas.width / 2;
    let ballY = canvas.height / 2;
    let ballSpeedX = 5;
    let ballSpeedY = 5;

    // Player paddles
    const player1 = {
      x: 10,
      y: canvas.height / 2 - paddleHeight / 2,
      width: paddleWidth,
      height: paddleHeight,
      score: 0,
    };

    const player2 = {
      x: canvas.width - paddleWidth - 10,
      y: canvas.height / 2 - paddleHeight / 2,
      width: paddleWidth,
      height: paddleHeight,
      score: 0,
    };

    // Draw functions
    function drawRect(x, y, w, h, color) {
      ctx.fillStyle = color;
      ctx.fillRect(x, y, w, h);
    }

    function drawCircle(x, y, r, color) {
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.arc(x, y, r, 0, Math.PI * 2, false);
      ctx.closePath();
      ctx.fill();
    }

    function drawText(text, x, y, color) {
        ctx.fillStyle = color;
        ctx.font = "32px sans-serif";
        ctx.fillText(text, x, y);
    }

    // Update game state
    function update() {
      // Move the ball
      ballX += ballSpeedX;
      ballY += ballSpeedY;

      // Bounce off top and bottom walls
      if (ballY + ballSize > canvas.height || ballY - ballSize < 0) {
        ballSpeedY = -ballSpeedY;
      }

      // Check for scoring
      if (ballX - ballSize < 0) {
        player2.score++;
        resetBall();
      } else if (ballX + ballSize > canvas.width) {
        player1.score++;
        resetBall();
      }

      // Check for paddle collision
      let player = (ballX < canvas.width / 2) ? player1 : player2;
      if (collision(player, {x: ballX, y: ballY, width: ballSize, height: ballSize})) {
        let collidePoint = (ballY - (player.y + player.height/2));
        collidePoint = collidePoint / (player.height/2);
        let angleRad = (Math.PI/4) * collidePoint;
        let direction = (ballX < canvas.width/2) ? 1 : -1;
        ballSpeedX = direction * 5 * Math.cos(angleRad);
        ballSpeedY = 5 * Math.sin(angleRad);
      }

      // Move paddles (basic AI for player 2)
      if (ballY > player2.y + player2.height / 2) {
        player2.y += paddleSpeed;
      } else {
        player2.y -= paddleSpeed;
      }
      player2.y = Math.max(0, Math.min(player2.y, canvas.height - player2.height));
    }

    function collision(b, p){
        b.top = b.y - b.height;
        b.bottom = b.y + b.height;
        b.left = b.x - b.width;
        b.right = b.x + b.width;
        
        p.top = p.y;
        p.bottom = p.y + p.height;
        p.left = p.x;
        p.right = p.x + p.width;
        
        return b.right > p.left && b.top < p.bottom && b.left < p.right && b.bottom > p.top;
    }

    function resetBall() {
      ballX = canvas.width / 2;
      ballY = canvas.height / 2;
      ballSpeedX = -ballSpeedX;
      ballSpeedY = 5;
    }

    // Draw everything
    function render() {
      // Clear the canvas
      drawRect(0, 0, canvas.width, canvas.height, '#000');

      // Draw paddles
      drawRect(player1.x, player1.y, player1.width, player1.height, '#fff');
      drawRect(player2.x, player2.y, player2.width, player2.height, '#fff');

      // Draw the ball
      drawCircle(ballX, ballY, ballSize, '#fff');

      // Draw scores
      drawText(player1.score, canvas.width / 4, 50, '#fff');
      drawText(player2.score, 3 * canvas.width / 4, 50, '#fff');
    }

    // Game loop
    function gameLoop() {
      update();
      render();
      requestAnimationFrame(gameLoop);
    }

    // Event listener for player 1 paddle movement
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowUp' && player1.y > 0) {
        player1.y -= paddleSpeed;
      } else if (e.key === 'ArrowDown' && player1.y < canvas.height - player1.height) {
        player1.y += paddleSpeed;
      }
    });

    // Start the game
    gameLoop();
  </script>
</body>
</html>
